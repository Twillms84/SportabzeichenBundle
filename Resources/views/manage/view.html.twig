{% extends "@IServCore/page.html.twig" %}

{% block page_content %}
<h2>{{ title }}</h2>

<form method="get" class="mb-3">
    <label>Jahr:</label>
    <select name="jahr" onchange="this.form.submit()">
        {% for y in jahre %}
            <option value="{{ y }}" {% if y == selected_jahr %}selected{% endif %}>{{ y }}</option>
        {% endfor %}
    </select>

    <label>Kategorie:</label>
    <select name="kategorie" onchange="this.form.submit()">
        <option value="">Alle</option>
        {% for k in kategorien %}
            <option value="{{ k }}" {% if k == selected_kategorie %}selected{% endif %}>{{ k }}</option>
        {% endfor %}
    </select>
</form>

<table class="table table-striped table-sm">
    <thead>
        <tr>
            <th>#</th>
            <th>Altersklasse</th>
            <th>Geschlecht</th>
            <th>Auswahl</th>
            <th>Disziplin</th>
            <th>Kategorie</th>
            <th>Bronze</th>
            <th>Silber</th>
            <th>Gold</th>
            <th>Einheit</th>
            <th>Schwimmnachweis</th>
            <th>Berechnungsart</th>
        </tr>
    </thead>
    <tbody>
        {% for row in anforderungen %}
            <tr>
                <td>{{ row.nummer }}</td>
                <td>{{ row.altersklasse }}</td>
                <td>{{ row.geschlecht }}</td>
                <td>{{ row.auswahlnummer }}</td>
                <td>{{ row.disziplin }}</td>
                <td>{{ row.kategorie }}</td>
                <td>{{ row.bronze }}</td>
                <td>{{ row.silber }}</td>
                <td>{{ row.gold }}</td>
                <td>{{ row.einheit }}</td>
                <td>{{ row.schwimmnachweis ? '✅' : '❌' }}</td>
                <td>{{ row.berechnungsart }}</td>
            </tr>
        {% else %}
            <tr><td colspan="12">Keine Datensätze gefunden.</td></tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
